/*
 * iOS 26 Vertical Battery Style
 *
 * Classic iPhone battery with outline border (vertical):
 *     ╭─╮
 *   ╭─┴─╮
 *   │ ⚡│
 *   │███│
 *   │███│
 *   ╰───╯
 *
 * Features:
 * - Outline border (not solid)
 * - Fill inside border with gap
 * - Lightning bolt inside when charging
 * - Color-coded: Green (charging), Yellow (medium), Orange (low), Red (critical)
 * - Border color matches fill color per state
 */

/* Hide original SVG battery */
[class*="_3XySI"] svg,
[class*="_3XySI"] > svg,
[class*="_3XySI"] canvas {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
}

/* Main battery container - iOS 26 vertical style */
[class*="_3XySI"] {
    position: relative !important;
    width: 22px !important;
    height: 36px !important;
    background: transparent !important;
    /* Outline border */
    border: 1.5px solid var(--mbt-fill-color, #ffffff) !important;
    border-radius: 5px !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: flex-end !important;
    align-items: center !important;
    padding: 0 !important;
    box-sizing: border-box !important;
    margin-top: 3px !important;
    box-shadow: none !important;
    overflow: visible !important;
}

/* Battery tip - top (solid, matches border) */
[class*="_3XySI"]::after {
    content: '' !important;
    position: absolute !important;
    top: -4px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: 8px !important;
    height: 3px !important;
    background: var(--mbt-fill-color, #ffffff) !important;
    border-radius: 2px 2px 0 0 !important;
}

/* Battery fill level - inside the border with gap */
[class*="_3XySI"]::before {
    content: '' !important;
    position: absolute !important;
    left: 2px !important;
    right: 2px !important;
    bottom: 2px !important;
    z-index: 1 !important;
    /* Use actual battery percentage from Steam Deck */
    height: calc(var(--battery-perc, 75) * 1% - 6px) !important;
    max-height: calc(100% - 6px) !important;
    background: var(--mbt-fill-color, #ffffff) !important;
    border-radius: 2px !important;
    transition: height 0.3s ease, background 0.3s ease !important;
}

/* ═══════════════════════════════════════════════════════════════
 * CHARGING STATE - Green with lightning bolt inside
 * ═══════════════════════════════════════════════════════════════ */

/* Charging - green fill */
[class*="_3XySI"][class*="Charging"]::before,
[class*="_3XySI"][class*="charging"]::before,
[class*="_3XySI"].charging::before {
    background: #4cd964 !important; /* iOS green */
}

/* Charging - green border */
[class*="_3XySI"][class*="Charging"],
[class*="_3XySI"][class*="charging"],
[class*="_3XySI"].charging {
    border-color: #4cd964 !important;
}

/* Charging - green tip */
[class*="_3XySI"][class*="Charging"]::after,
[class*="_3XySI"][class*="charging"]::after,
[class*="_3XySI"].charging::after {
    background: #4cd964 !important;
}

/* ═══════════════════════════════════════════════════════════════
 * LOW BATTERY STATE - Yellow/Orange
 * ═══════════════════════════════════════════════════════════════ */

/* Low battery - yellow/orange fill (under 20%) */
[class*="_3XySI"][class*="Low"]::before,
[class*="_3XySI"][class*="low"]::before,
[class*="_3XySI"].low::before {
    background: #ffcc00 !important; /* iOS yellow */
}

/* Low battery - yellow border */
[class*="_3XySI"][class*="Low"],
[class*="_3XySI"][class*="low"],
[class*="_3XySI"].low {
    border-color: #ffcc00 !important;
}

/* Low battery - yellow tip */
[class*="_3XySI"][class*="Low"]::after,
[class*="_3XySI"][class*="low"]::after,
[class*="_3XySI"].low::after {
    background: #ffcc00 !important;
}

/* ═══════════════════════════════════════════════════════════════
 * CRITICAL BATTERY STATE - Red
 * ═══════════════════════════════════════════════════════════════ */

/* Critical battery - red fill (under 10%) */
[class*="_3XySI"][class*="Critical"]::before,
[class*="_3XySI"][class*="critical"]::before,
[class*="_3XySI"].critical::before {
    background: #ff3b30 !important; /* iOS red */
    animation: mbt-critical-pulse 1s ease-in-out infinite !important;
}

/* Critical battery - red border */
[class*="_3XySI"][class*="Critical"],
[class*="_3XySI"][class*="critical"],
[class*="_3XySI"].critical {
    border-color: #ff3b30 !important;
}

/* Critical battery - red tip */
[class*="_3XySI"][class*="Critical"]::after,
[class*="_3XySI"][class*="critical"]::after,
[class*="_3XySI"].critical::after {
    background: #ff3b30 !important;
}

/* ═══════════════════════════════════════════════════════════════
 * ANIMATIONS
 * ═══════════════════════════════════════════════════════════════ */

@keyframes mbt-critical-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}
