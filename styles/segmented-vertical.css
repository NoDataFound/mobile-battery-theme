/*
 * Segmented Vertical Battery Style (Nokia/Classic)
 *
 * Retro segmented design with discrete bars:
 *     ╭─╮
 *   ╭─┴─╮
 *   │▓▓▓│ ← segment 5
 *   │▓▓▓│ ← segment 4
 *   │▓▓▓│ ← segment 3
 *   │░░░│ ← segment 2 (empty)
 *   │░░░│ ← segment 1 (empty)
 *   ╰───╯
 *
 * Features:
 * - 5 discrete segments
 * - Outline border
 * - Color-coded by charge level
 */

/* Hide original SVG battery */
[class*="_3XySI"] svg,
[class*="_3XySI"] > svg,
[class*="_3XySI"] canvas {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
}

/* Main battery container */
[class*="_3XySI"] {
    position: relative !important;
    width: 20px !important;
    height: 32px !important;
    background: transparent !important;
    border: 2px solid var(--mbt-fill-color, #ffffff) !important;
    border-radius: 3px !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: flex-end !important;
    align-items: center !important;
    padding: 2px !important;
    box-sizing: border-box !important;
    margin-top: 3px !important;
    box-shadow: none !important;
    overflow: visible !important;
    /* Segment lines using gradient */
    background-image:
        linear-gradient(to bottom,
            transparent 0%, transparent 18%,
            rgba(0,0,0,0.3) 18%, rgba(0,0,0,0.3) 20%,
            transparent 20%, transparent 38%,
            rgba(0,0,0,0.3) 38%, rgba(0,0,0,0.3) 40%,
            transparent 40%, transparent 58%,
            rgba(0,0,0,0.3) 58%, rgba(0,0,0,0.3) 60%,
            transparent 60%, transparent 78%,
            rgba(0,0,0,0.3) 78%, rgba(0,0,0,0.3) 80%,
            transparent 80%, transparent 100%
        ) !important;
}

/* Battery tip */
[class*="_3XySI"]::after {
    content: '' !important;
    position: absolute !important;
    top: -4px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: 8px !important;
    height: 3px !important;
    background: var(--mbt-fill-color, #ffffff) !important;
    border-radius: 2px 2px 0 0 !important;
}

/* Battery fill - segmented appearance */
[class*="_3XySI"]::before {
    content: '' !important;
    position: absolute !important;
    left: 3px !important;
    right: 3px !important;
    bottom: 3px !important;
    z-index: 1 !important;
    height: calc(var(--battery-perc, 75) * 1% - 6px) !important;
    max-height: calc(100% - 6px) !important;
    background: var(--mbt-fill-color, #ffffff) !important;
    border-radius: 1px !important;
    transition: height 0.3s ease !important;
}

/* Charging - green */
[class*="_3XySI"][class*="Charging"]::before,
[class*="_3XySI"][class*="charging"]::before {
    background: #4cd964 !important;
}
[class*="_3XySI"][class*="Charging"],
[class*="_3XySI"][class*="charging"] {
    border-color: #4cd964 !important;
}
[class*="_3XySI"][class*="Charging"]::after,
[class*="_3XySI"][class*="charging"]::after {
    background: #4cd964 !important;
}

/* Low battery - yellow */
[class*="_3XySI"][class*="Low"]::before,
[class*="_3XySI"][class*="low"]::before {
    background: #ffcc00 !important;
}
[class*="_3XySI"][class*="Low"],
[class*="_3XySI"][class*="low"] {
    border-color: #ffcc00 !important;
}
[class*="_3XySI"][class*="Low"]::after,
[class*="_3XySI"][class*="low"]::after {
    background: #ffcc00 !important;
}

/* Critical - red with pulse */
[class*="_3XySI"][class*="Critical"]::before,
[class*="_3XySI"][class*="critical"]::before {
    background: #ff3b30 !important;
    animation: mbt-critical-pulse 1s ease-in-out infinite !important;
}
[class*="_3XySI"][class*="Critical"],
[class*="_3XySI"][class*="critical"] {
    border-color: #ff3b30 !important;
}
[class*="_3XySI"][class*="Critical"]::after,
[class*="_3XySI"][class*="critical"]::after {
    background: #ff3b30 !important;
}

@keyframes mbt-critical-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}
